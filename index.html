<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Alamanese ‚Äî Secure</title>
<style>
  :root{--bg:#8a0000;--panel:#660000;--dark:#330000;--accent:#ff4d4d;--muted:#220000}
  html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:#fff}
  .wrap{min-height:100%;display:flex;align-items:flex-start;justify-content:center;padding:28px;box-sizing:border-box}
  #lock{width:100%;max-width:820px;text-align:center}
  input[type="password"], input[type="text"], textarea, button{
    font-family:inherit;font-size:15px;box-sizing:border-box;
  }
  input[type="password"], input[type="text"]{
    width:260px;padding:10px;border-radius:6px;border:2px solid var(--accent);background:var(--dark);color:#fff;
  }
  button{padding:8px 14px;border-radius:6px;border:none;background:var(--accent);color:#fff;cursor:pointer}
  #msg{height:22px;margin-top:10px;color:#ffd4d4}
  /* Panels are hidden by default using display:none ‚Äî robust across browsers */
  .panel { display:none; width:90%; max-width:820px; background:var(--panel); border-radius:10px; padding:18px; margin:18px auto; box-sizing:border-box; }
  .folder{background:var(--dark);border:2px solid var(--accent);padding:10px;border-radius:6px;cursor:pointer;margin-top:10px}
  .folder-content{display:none;background:var(--muted);padding:10px;border-radius:6px;margin-top:8px;white-space:pre-wrap}
  textarea{width:100%;min-height:120px;background:var(--dark);border:2px solid var(--accent);color:#fff;padding:10px;border-radius:6px}
  .controls{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
  .small{padding:6px 10px;background:#aa0000;border-radius:6px;border:none;color:#fff;cursor:pointer}
  .level-lock{margin-top:14px;padding:10px;background:var(--dark);border-radius:6px;border:1px solid var(--accent)}
  ul#accessLog{list-style:none;padding-left:8px;margin:8px 0;max-height:140px;overflow:auto}
  .note{font-size:13px;color:#ffd4d4;margin-top:8px}
</style>
</head>
<body>
<div class="wrap">

  <!-- LOCK / PASSWORD ENTRY -->
  <div id="lock">
    <h2>ALAMANESE ACCESS</h2>
    <input id="pw" type="password" placeholder="Enter access password" autocomplete="off" />
    <br><br>
    <button id="enterBtn" onclick="enter()">ENTER</button>
    <div id="msg" aria-live="polite"></div>
    <div class="note">Use main password for translator or owner password for secret panel.</div>
  </div>

  <!-- TRANSLATOR PANEL (must be shown only by correct password) -->
  <div id="translator" class="panel" aria-hidden="true">
    <h3>Alamanese Translator</h3>
    <textarea id="in" placeholder="Type English here..."></textarea>
    <div class="controls">
      <button onclick="translateText()">Translate ‚Üí</button>
      <button onclick="clearText()" class="small">Clear</button>
      <button onclick="copyOutput()" class="small">Copy</button>
    </div>
    <textarea id="out" placeholder="Alamanese output..." readonly></textarea>

    <div style="margin-top:14px">
      <input id="secretPw" type="password" placeholder="Owner Access Password (optional)" style="width:300px;padding:8px;background:var(--dark);border:1px solid var(--accent);color:#fff;border-radius:6px" />
      <button onclick="openSecret()" class="small">Open Secret Panel</button>
      <div class="note">Owner password can also be entered here to open the secret panel.</div>
    </div>
  </div>

  <!-- SECRET PANEL (owner-only, must be shown only by exact owner password) -->
  <div id="secretPanel" class="panel" aria-hidden="true">
    <h3 style="margin-top:0">TOP-SECRET ‚Äî OWNER ACCESS</h3>

    <div class="folder" onclick="toggleFolder('f1')">üìÅ CLASSIFIED PERSONNEL REPORT ‚Äî IVA IDENTITY</div>
    <div id="f1" class="folder-content">
The identity of the leader known as ‚ÄúIVA‚Äù has not been disclosed to lower-class personnel. Only upper-tier command members possess authorization to access the true designation of the so-called ‚ÄúIVA‚Äù (Amodelak). Unauthorized inquiries will be met with disciplinary review.
    </div>

    <div class="folder" onclick="toggleFolder('f2')">üìÅ ALAMA OPERATIONS DIVISION ‚Äî MISSIONS</div>
    <div id="f2" class="folder-content">
The primary mission objective of ALAMA is surveillance and assessment of our highest-priority adversary, Jeff. Recon units are conducting operations to identify associates; Criminal Affairs is focused on funding streams. Recent intelligence indicates activity in Cuba. Recon deployment authorized.
    </div>

    <div class="folder" onclick="toggleFolder('f3')">üìÅ LEVEL 10 SECURITY INCIDENT ‚Äî REPORT 47-B</div>
    <div id="f3" class="folder-content">
CLASSIFICATION: Maximum Clearance ‚Äî ALAMA Command Only
DIVISION: Internal Security Bureau (ISB)
DATE/TIME: 14:30 ‚Äî Local HQ Time

1) OVERVIEW
During routine perimeter maintenance, Squadron One (Engineering) detected a thermal signature ~200m east of HQ. The event involved heated decoys and resulted in theft of a perimeter sensor.

2) DRONE CONTACT
Drones located the figure; it fled into tree cover deploying heated decoys. One squad member sustained minor thermal injuries from a detonation; treated and stabilized.

3) GROUND RESPONSE & DISCOVERY
Squadron Two executed a sweep; no trace recovered. Missing asset: HIGH-VALUE SENSOR UNIT ‚Äî STATUS: COMPROMISED.

CONCLUSION
Suspect had prior knowledge of perimeter layout; intelligence and recovery operations ongoing.
    </div>

    <div style="margin-top:14px;border-top:1px solid #3b0000;padding-top:12px">
      <div class="level-lock" id="lvlLockArea">
        <div style="font-weight:bold;margin-bottom:6px">Level-10 Log ‚Äî Restricted</div>
        <input id="logPw" type="password" placeholder="Enter Level-10 Clearance" style="width:260px;padding:8px;background:var(--dark);border:1px solid var(--accent);color:#fff;border-radius:6px" />
        <button onclick="unlockLog()" class="small">Unlock Log</button>
        <div id="lvlMsg" class="note"></div>
      </div>

      <div id="logSection" style="display:none;margin-top:12px;background:var(--muted);padding:10px;border-radius:6px">
        <strong>ACCESS LOG:</strong>
        <ul id="accessLog"></ul>
      </div>
    </div>

  </div>
</div>

<script>
/* ----------------------
   PASSWORDS (exact)
   ---------------------- */
const translatorPassword = "alama02";
const ownerPassword      = "uIet qtlpz cdodydpz 4";
const secondaryPassword  = "MA02";

/* ----------------------
   Utility: trim and normalize input
   ---------------------- */
function getTrimmedValue(id){
  const el = document.getElementById(id);
  if(!el) return "";
  return String(el.value || "").trim();
}

/* ----------------------
   Hide panels safely on load (defensive)
   ---------------------- */
(function initVisibility(){
  document.getElementById("translator").style.display = "none";
  document.getElementById("secretPanel").style.display = "none";
  document.getElementById("logSection").style.display = "none";
})();

/* ----------------------
   ENTER: strict gating
   - hides both panels first (defensive)
   - only reveals exactly matching password
   ---------------------- */
function enter(){
  const p = getTrimmedValue("pw");
  const msg = document.getElementById("msg");
  const translator = document.getElementById("translator");
  const secret = document.getElementById("secretPanel");

  // Defensive reset on every attempt
  translator.style.display = "none";
  secret.style.display = "none";

  if(p.length === 0){
    msg.textContent = "Password wrong";
    setTimeout(()=> msg.textContent = "", 1500);
    return;
  }

  if(p === ownerPassword){
    msg.textContent = "Owner access granted ‚Äî Secret panel unlocked";
    secret.style.display = "block";
    secret.setAttribute("aria-hidden","false");
    // also hide translator explicitly
    translator.style.display = "none";
  } else if(p === translatorPassword){
    msg.textContent = "Translator access granted";
    translator.style.display = "block";
    translator.setAttribute("aria-hidden","false");
    // secret stays hidden
    secret.style.display = "none";
  } else {
    msg.textContent = "Password wrong";
    setTimeout(()=> msg.textContent = "", 1400);
  }
}

/* ----------------------
   Translate (Alamanese cipher)
   - preserves non-letter characters
   ---------------------- */
const cipher = {
  a:"j",b:"m",c:"l",d:"c",e:"t",f:"r",
  g:"c",h:"v",i:"d",j:"f",k:"s",l:"a",
  m:"w",n:"z",o:"p",p:"e",q:"g",r:"q",
  s:"y",t:"u",u:"n",v:"o",w:"k",x:"h",
  y:"I",z:"bu"
};

function translateText(){
  const input = (document.getElementById("in").value || "").toLowerCase();
  let out = "";
  for(const ch of input){
    if(ch >= 'a' && ch <= 'z'){
      out += (cipher[ch] !== undefined ? cipher[ch] : ch);
    } else {
      out += ch;
    }
  }
  document.getElementById("out").value = out;
}

function clearText(){
  document.getElementById("in").value = "";
  document.getElementById("out").value = "";
}
function copyOutput(){
  const out = document.getElementById("out");
  out.select();
  try { navigator.clipboard.writeText(out.value); alert("Copied to clipboard"); }
  catch(e){ /* ignore if not available */ }
}

/* ----------------------
   Open secret via the owner box inside translator
   - redundant: still requires exact owner password
   ---------------------- */
function openSecret(){
  const p = getTrimmedValue("secretPw");
  if(p === ownerPassword){
    document.getElementById("secretPanel").style.display = "block";
    document.getElementById("secretPanel").setAttribute("aria-hidden","false");
  } else {
    alert("Incorrect owner password.");
  }
}

/* ----------------------
   Folder toggle + log (only logs openings)
   ---------------------- */
function toggleFolder(id){
  const el = document.getElementById(id);
  const showing = el.style.display === "block";
  el.style.display = showing ? "none" : "block";

  if(!showing){
    // log the opening
    const log = document.getElementById("accessLog");
    const folderEl = document.querySelector(`[onclick="toggleFolder('${id}')"]`);
    const folderName = folderEl ? folderEl.textContent.trim() : id;
    const t = new Date().toLocaleString();
    const li = document.createElement("li");
    li.textContent = `${t} ‚Äî Opened ${folderName}`;
    log.appendChild(li);
  }
}

/* ----------------------
   Unlock Level-10 log
   ---------------------- */
function unlockLog(){
  const p = getTrimmedValue("logPw");
  const msg = document.getElementById("lvlMsg");
  if(p === secondaryPassword){
    document.getElementById("logSection").style.display = "block";
    msg.textContent = "Level 10 clearance granted";
    setTimeout(()=> msg.textContent = "", 1600);
    document.getElementById("logPw").value = "";
  } else {
    msg.textContent = "Incorrect clearance level";
    setTimeout(()=> msg.textContent = "", 1200);
    document.getElementById("logPw").value = "";
  }
}
</script>
</body>
</html>
